<!DOCTYPE html>
<html>
<head>
  <style>
  body, html {
    height: 100%;
    margin: 0;
    padding: 0;
    display: flex;   /* This makes the body a flex container */
    flex-direction: column;   /* This stacks the children vertically */
  }
  .main {
    padding: 10px;
    box-sizing: border-box;
    flex-grow: 1;  /* This allows the main area to take up the rest of the space */
  }
  #tabsComponent{
    /* Reset/Override body styles for the sidebar */
    all: initial;
    /* Now apply your custom styles for the sidebar */
    padding: 10px;
    font-family: Verdana;
    background-color: white;
  }
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  {{extra_head|safe}}
</head>
<body>

  <div class="main">
    {{content|safe}}
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // Create sidebar
      const sidebar = document.createElement('div');
      sidebar.style.all = 'initial';
      sidebar.style.position = 'fixed';
      sidebar.style.left = '0';
      sidebar.style.top = '0';
      sidebar.style.height = '100%';
      sidebar.style.backgroundColor = '#f9f9f9';
      sidebar.style.boxSizing = 'border-box';
      sidebar.style.padding = '10px';
      sidebar.style.display = 'flex';
      sidebar.style.flexDirection = 'column';
      sidebar.style.fontFamily = "'Source Code Pro'";
      sidebar.style.fontSize = "20px"; 
      sidebar.style.width = '200px'; // Width of the sidebar
      sidebar.style.overflow = 'auto';
    
      // Create links (tabs)
      const links = [
        {name: 'Upload', url: '{{upload_path}}'},
        {name: 'Document', url: '{{document_path}}'},
        {name: 'Review', url: '{{review_path}}'},
        {name: 'Labels', url: '{{labels_path}}'},
        {name: 'Settings', url: '{{settings_path}}'},
        {name: 'Import Events', url: '{{import_events_path}}'},
        {name: 'Export', url: '{{export_path}}'},
      ];
    
      const pathParts = window.location.pathname.split('/');
      const activeTabName = pathParts.length >= 3 ? pathParts[3] : '';  // Get the 3rd child of the url
    
      links.forEach(link => {
        const tab = document.createElement('div');
        tab.className = 'tab';
        tab.style.padding = '10px';
        tab.style.border = '1px solid #cccccc';
        tab.style.cursor = 'pointer';
        tab.style.marginBottom = '10px';
        tab.innerText = link.name;
        tab.addEventListener('click', () => {
          document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          window.location.href = link.url;
        });
        sidebar.appendChild(tab);
    
        if (link.name.toLowerCase() === activeTabName) {  // Check if the link name matches the 3rd child of the url
          tab.classList.add('active');  // If so, set this tab as active
        }
      });
    
      // Append sidebar to the body
      document.body.appendChild(sidebar);
    
      // Adjust the rest of the body to not be overlapped by sidebar
      document.body.style.paddingLeft = '210px';  // adjust this value based on the width of your sidebar
    
      // Adding styles for hover and active states
      const style = document.createElement('style');
      style.innerHTML = `
        .tab:hover {
          background-color: #ddd;  // change color on hover
        }
        .tab.active {
          background-color: #cccccc;  // change color for active tab
        }
      `;
      document.head.appendChild(style);
    });
    </script>
</body>
</html>
